{% comment %}
  Header navigation with logo, menu, search, and cart
{% endcomment %}

<header class="header" data-section-id="{{ section.id }}" data-section-type="header">
  <div class="header-container">
    <a href="/" class="header-logo">
      {%- if settings.logo != blank -%}
        <img src="{{ settings.logo | image_url: width: 200 }}" alt="{{ shop.name }}" width="200" height="auto">
      {%- else -%}
        MASON CREST
      {%- endif -%}
    </a>

    <nav class="header-nav">
      <a href="/">{{ section.settings.menu_home | default: 'Home' }}</a>
      <a href="https://mason-crest.myshopify.com/pages/about-us">About</a>
      <a href="https://mason-crest.myshopify.com/pages/faqs">FAQs</a>
      <a href="https://mason-crest.myshopify.com/pages/shipping">Shipping</a>
      <a href="https://mason-crest.myshopify.com/pages/contact-us">Contact</a>

      <div class="dropdown">
        <a href="#" class="dropdown-toggle">Policies</a>
        <div class="dropdown-content">
          <a href="https://mason-crest.myshopify.com/pages/privacy-policy">Privacy Policy</a>
          <a href="https://mason-crest.myshopify.com/pages/terms-of-service">Terms of Service</a>
          <a href="https://mason-crest.myshopify.com/pages/refund-policy">Refund Policy</a>
        </div>
      </div>
    </nav>

    <div class="header-icons">
      <button class="header-icon search-trigger" aria-label="Search">
        <img src="{{ 'icon-search.svg' | asset_url }}" alt="Search" width="20" height="20">
      </button>
      <a href="https://mason-crest.myshopify.com/account" class="header-icon" aria-label="Account">
        <img src="{{ 'icon-account.svg' | asset_url }}" alt="Account" width="20" height="20">
      </a>
      <a href="https://mason-crest.myshopify.com/cart" class="header-icon cart-trigger" aria-label="Cart">
        <img src="{{ 'icon-cart.svg' | asset_url }}" alt="Cart" width="20" height="20">
        <span class="cart-count" data-cart-count>{{ cart.item_count }}</span>
      </a>
      <button class="mobile-menu-toggle header-icon" aria-label="Menu">
        <img src="{{ 'icon-menu.svg' | asset_url }}" alt="Menu" width="24" height="24">
      </button>
    </div>
  </div>
</header>

<div class="mobile-menu-overlay"></div>
<div class="mobile-menu">
  <div class="mobile-menu-header">
    <div class="header-logo">
      {%- if settings.logo != blank -%}
        <img src="{{ settings.logo | image_url: width: 150 }}" alt="{{ shop.name }}" width="150" height="auto">
      {%- else -%}
        MC
      {%- endif -%}
    </div>
    <button class="mobile-menu-close">
      <img src="{{ 'icon-close.svg' | asset_url }}" alt="Close" width="24" height="24">
    </button>
  </div>
  <ul class="mobile-menu-links">
    <li><a href="/">{{ section.settings.menu_home | default: 'Home' }}</a></li>
    <li><a href="https://mason-crest.myshopify.com/pages/about-us">About</a></li>
    <li><a href="https://mason-crest.myshopify.com/pages/faqs">FAQs</a></li>
    <li><a href="https://mason-crest.myshopify.com/pages/shipping">Shipping</a></li>
    <li><a href="https://mason-crest.myshopify.com/pages/contact-us">Contact</a></li>
    <li>
      <strong>Policies</strong>
      <ul style="margin-top: 1rem; padding-left: 1rem;">
        <li style="margin-bottom: 0.8rem;">
          <a href="https://mason-crest.myshopify.com/pages/privacy-policy" style="font-size: 0.95rem; text-transform: none;">Privacy Policy</a>
        </li>
        <li style="margin-bottom: 0.8rem;">
          <a href="https://mason-crest.myshopify.com/pages/terms-of-service" style="font-size: 0.95rem; text-transform: none;">Terms of Service</a>
        </li>
        <li style="margin-bottom: 0.8rem;">
          <a href="https://mason-crest.myshopify.com/pages/refund-policy" style="font-size: 0.95rem; text-transform: none;">Refund Policy</a>
        </li>
      </ul>
    </li>
    <li style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
      <a href="https://mason-crest.myshopify.com/account">My Account</a>
    </li>
    <li>
      <a href="https://mason-crest.myshopify.com/cart">Cart ({{ cart.item_count }})</a>
    </li>
  </ul>
</div>

<div class="modal search-modal">
  <div class="modal-content">
    <button class="modal-close search-close" aria-label="Close search">&times;</button>
    <h2 style="margin-bottom: 2rem;">Search Products</h2>
    <form action="/search" method="get" role="search">
      <input
        type="search"
        name="q"
        class="search-input"
        placeholder="{{ section.settings.search_placeholder | default: 'Search for products...' }}"
        autocomplete="off"
      >
    </form>
    <div id="search-results" style="margin-top: 2rem;"></div>
  </div>
</div>

<style>
  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: var(--color-white);
    color: var(--color-black);
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 600;
  }

  .header-icon {
    position: relative;
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "menu_home",
      "label": "Home Menu Text",
      "default": "Home"
    },
    {
      "type": "text",
      "id": "menu_shop",
      "label": "Shop Menu Text",
      "default": "Shop"
    },
    {
      "type": "text",
      "id": "menu_categories",
      "label": "Categories Menu Text",
      "default": "Categories"
    },
    {
      "type": "text",
      "id": "menu_about",
      "label": "About Menu Text",
      "default": "About"
    },
    {
      "type": "text",
      "id": "menu_contact",
      "label": "Contact Menu Text",
      "default": "Contact"
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search Placeholder Text",
      "default": "Search for products..."
    },
    {
      "type": "text",
      "id": "menu_cart",
      "label": "Cart Menu Text",
      "default": "Cart"
    }
  ]
}
{% endschema %}
