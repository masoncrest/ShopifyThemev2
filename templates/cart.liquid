{% comment %}
  Cart page template
{% endcomment %}

<div class="section">
  <div class="container" style="max-width: 1000px;">
    <h1 style="text-align: center; margin-bottom: 3rem;">Your Cart</h1>

    {% if cart.item_count > 0 %}
      <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 4rem;">
        <div>
          {% for item in cart.items %}
            <div style="display: flex; gap: 2rem; margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
              <div style="width: 120px; height: 120px; flex-shrink: 0;">
                {% if item.image %}
                  <img src="{{ item.image | image_url: width: 240 }}" alt="{{ item.title }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;">
                {% endif %}
              </div>

              <div style="flex: 1;">
                <h3 style="margin-bottom: 0.5rem;">{{ item.product.title }}</h3>
                {% if item.variant.title != 'Default Title' %}
                  <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 0.5rem;">{{ item.variant.title }}</p>
                {% endif %}
                <p style="font-weight: 600; font-size: 1.2rem;">{{ item.final_price | money }}</p>
              </div>

              <div>
                <form action="/cart/change" method="post">
                  <input type="hidden" name="line" value="{{ forloop.index }}">
                  <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <input
                      type="number"
                      name="quantity"
                      value="{{ item.quantity }}"
                      min="0"
                      style="width: 80px; padding: 0.8rem; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 4px; color: white; text-align: center;"
                    >
                    <button type="submit" class="btn" style="padding: 0.8rem 1.5rem;">Update</button>
                  </div>
                </form>
                <p style="text-align: right; color: rgba(255, 255, 255, 0.7);">{{ item.final_line_price | money }}</p>
              </div>
            </div>
          {% endfor %}
        </div>

        <div>
          <div style="background-color: rgba(0, 0, 0, 0.3); padding: 2rem; border-radius: 8px; position: sticky; top: 100px;">
            <h2 style="margin-bottom: 2rem; font-size: 1.5rem;">Order Summary</h2>

            <div style="display: flex; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
              <span>Subtotal</span>
              <span>{{ cart.total_price | money }}</span>
            </div>

            <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 2rem;">
              Shipping and taxes calculated at checkout
            </p>

            <a href="/checkout" class="btn" style="width: 100%; text-align: center; display: block; padding: 1.5rem;">
              Proceed to Checkout
            </a>

            <a href="/collections/all" style="display: block; text-align: center; margin-top: 1rem; color: rgba(255, 255, 255, 0.7);">
              Continue Shopping
            </a>
          </div>
        </div>
      </div>
    {% else %}
      <div style="text-align: center; padding: 4rem 2rem;">
        <h2 style="margin-bottom: 1rem; color: rgba(255, 255, 255, 0.8);">Your cart is empty</h2>
        <p style="color: rgba(255, 255, 255, 0.6); margin-bottom: 2rem;">Add some products to get started</p>
        <a href="/collections/all" class="btn">Start Shopping</a>
      </div>
    {% endif %}
  </div>
</div>

<style>
  @media screen and (max-width: 989px) {
    .container > div {
      grid-template-columns: 1fr !important;
    }
  }
</style>
